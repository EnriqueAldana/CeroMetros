Procedimiento para la creacion y despliegue de Cero Metros 
mediante docker despliegue manual.

1.- Creacion de Imagen con docker-compose 
    1.1 Colocarse en el directorio del codigo fuente
    /Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros
    1.2 Ajustar variables de instalacion.
        Archivo docker.env
        Archivo docker-compose.yml 
            - SERVER_NAME=cerometros.dimemex.site
            VERIFICAR QUE SE INSTALEN en el server de destino
            CERT_PUBLIC_PATH=/certs/fullchain.pem  
            
            volumes:
            - /certs:    /certs:ro
            volumes:
            - $PWD/data:/data/db
            - $PWD/database/zmeters:     /opt/database
            volumes: 
            - ./backups:        /opt/backups
    1.3 Construir las imagenes con:
        docker-compose build
        o bien
        docker-compose -f docker-compose_No_ssl-proxy.yml build
    1.4 Instalar respaldo base de datos
        1.4.1 arrancar MongoDB
        docker-compose up -d mongo
        1.4.2 Vaciar respaldo
        docker exec -ti mongo bash
        1.4.3 ir a la carpeta de /opt/database
        cadena de comexion a MongoDB Dev
        mongodb://jealdana.com:27017/zmeters
        1.4.3.1 desplegar variables de entorno
        env
        1.4.3.2 ejecutar backup
        mongorestore -u $MONGO_INITDB_ROOT_USERNAME -p $MONGO_INITDB_ROOT_PASSWORD --authenticationDatabase admin --db zmeters .

    1.5 Verificar ejecutando la imagen
        1.5.1 Levantar la aplicacion
        docker-compose up -d
        1.5.2 verificar contenedor
        docker ps
        1.5.3 verificar  logs
            docker-compose logs
        1.5.4 acceder a la aplicacion
            http://127.0.0.1

    1.6 Detener la aplicacion
    docker-compose down
    
2.- Publicacion de Imagen en repositorio privado.
    2.1 Crear un repositorio privado o publico tal como:
    jealdana/cero-metros0.0.1
    2.2 Crear un Tag de la imagen creda
    docker tag <LocalRepositoryName:TAG> <DockerHubRepository>:NewTag
    quedaria asi:
    docker tag cerometros-web:latest jealdana/cero-metros0.0.1:20211216
    docker tag crontab:latest jealdana/cero-metros0.0.1:20211216
    2.3 Logearse a DockerHub 
        docker login

    2.4 Subir la imagen creada en local
    docker push <DockerHubRepository>:<tagNameCreated>
    docker push jealdana/cero-metros0.0.1:20211216 

3.- Despliegue en la Nube 
    para bajar la imagen
    docker pull jealdana/cero-metros0.0.1:20211216

Procedimiento para la creacion y despliegue de Cero Metros mediante
continuos integration usando jenkings.



