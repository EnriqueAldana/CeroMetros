{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var Product;\nmodule.link(\"../../../api/Products/Product\", {\n  Product: function (v) {\n    Product = v;\n  }\n}, 0);\nmodule.exportDefault({\n  name: \"ModalBOM\",\n  props: ['modalData'],\n  data: function () {\n    return {\n      dialog: false,\n      toSeebtn: false,\n      itemSelected: [],\n      itemBOM: {\n        quantity: '',\n        _id: '',\n        name: ''\n      },\n      itemList: [],\n      selectedItem: 1,\n      rules: {\n        required: function (value) {\n          return !!value || 'Requerido.';\n        },\n        counter: function (value) {\n          return value.length <= 20 || 'Max 20 caracteres';\n        },\n        number: function (value) {\n          var pattern = /^[+-]?\\d+([,.]\\d+)?$/;\n          return pattern.test(value) || 'Numero con formato equivocado, debe ser un real Ejemplo: -123.35 o 7,4 o 8';\n        }\n      },\n      headersFilter: {\n        isAvailable: '',\n        name: '',\n        name_full: '',\n        unit: {\n          _id: '',\n          name: ''\n        },\n        stock: '',\n        sku: '',\n        location: '',\n        warehouse: {\n          _id: '',\n          name: ''\n        },\n        provider: {\n          _id: '',\n          name: ''\n        }\n      },\n      headersBOMFilter: {\n        name: '',\n        quantity: ''\n      }\n    };\n  },\n  show: function () {\n    // Aqui inicializamos la lista el bom qu el Producto tiene \n    console.info('modalData', this.modalData);\n    this.itemList = this.modalData.bom;\n  },\n  computed: {\n    validateQuantity: {\n      set: function (validateQuantity) {\n        //console.info('cambio text fiel de cantidad  ',validateQuantity);\n        this.itemBOM.quantity = validateQuantity;\n\n        if (this.itemBOM.quantity !== '') {\n          //console.log('this.itemBOM._id ',this.itemBOM._id);\n          if (this.itemBOM._id !== '') {\n            this.toSeebtn = true;\n          } else {\n            this.toSeebtn = false;\n          }\n        } else {\n          this.toSeebtn = false;\n        }\n      }\n    },\n    validateSelectItem: {\n      set: function (validateSelectItem) {\n        //console.info('Lista de articulos ha cambiado  ',validateSelectItem);\n        // si hay un seleccionado\n        if (validateSelectItem.length > 0) {\n          this.itemBOM._id = validateSelectItem[0]._id;\n          this.itemBOM.name = validateSelectItem[0].name;\n\n          if (this.itemBOM.quantity.length > 0) {\n            this.toSeebtn = true;\n          } else {\n            this.toSeebtn = false;\n          }\n        } else {\n          this.itemBOM._id = '';\n          this.toSeebtn = false;\n        }\n      },\n      get: function () {\n        return;\n      }\n    },\n    headers: function () {\n      var _this = this;\n\n      return [{\n        value: 'isAvailable',\n        text: 'Disponible',\n        sortable: true\n      }, {\n        value: 'name',\n        text: 'Nombre',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'name_full',\n        text: 'Nombre completo',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.name_full.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'unit.name',\n        text: 'Unidad',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.unit.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'stock',\n        text: 'Existencias',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.stock.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'sku',\n        text: 'SKU',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.sku.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'location',\n        text: 'Ubicacion',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.location.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'warehouse.name',\n        text: 'Almacen',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.warehouse.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'provider.name',\n        text: 'Proveedor',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.provider.name.toLocaleLowerCase()) !== -1;\n        }\n      }];\n    },\n    headersBOMList: function () {\n      var _this2 = this;\n\n      return [{\n        value: 'quantity',\n        text: 'Cantidad',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this2.headersBOMFilter.quantity.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'name',\n        text: 'Nombre',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this2.headersBOMFilter.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'action',\n        text: 'Opciones',\n        sortable: false\n      }];\n    }\n  },\n  methods: {\n    acceptBoM: function () {\n      // aqui hay que cargar la lista a bomList para regresarla\n      this.modalData.bomList = this.itemList;\n      this.$emit('bomList', this.modalData.bomList);\n      this.dialog = false;\n    },\n    cancel: function () {\n      this.itemList = [];\n      this.dialog = false;\n    },\n    addItem: function () {\n      //Agregar al componente List bindeado a this.modalData.bomList=itemBOM\n      console.log('this.itemBOM ', this.itemBOM);\n      var itemAdded = this.itemBOM;\n      console.log('itemAdded', itemAdded);\n      this.itemList.push(itemAdded);\n      console.log('this.itemList', this.itemList);\n    },\n    removeItemFromproductBOM: function (i) {\n      this.itemList.splice(i);\n    },\n    resetitemBOM: function () {\n      this.itemBOM.quantity = 0;\n      this.itemBOM.name = '';\n      this.itemBOM._id = '';\n    }\n  },\n  meteor: {\n    $subscribe: {\n      'product.list': []\n    },\n    products: function () {\n      var productList = Product.find({}, {\n        fields: {\n          isAvailable: 1,\n          name: 1,\n          name_full: 1,\n          stock: 1,\n          unit: 1,\n          sku: 1,\n          location: 1,\n          provider: 1,\n          warehouse: 1,\n          production_line: 1\n        }\n      }).fetch();\n      console.info('productList', productList);\n      return productList;\n    }\n  }\n});\n})();","map":{"version":3,"sources":["imports/ui/views/Products/ModalBoM.vue"],"names":["Product","module","link","v","exportDefault","name","props","data","dialog","toSeebtn","itemSelected","itemBOM","quantity","_id","itemList","selectedItem","rules","required","value","counter","length","number","pattern","test","headersFilter","isAvailable","name_full","unit","stock","sku","location","warehouse","provider","headersBOMFilter","show","console","info","modalData","bom","computed","validateQuantity","set","validateSelectItem","get","headers","text","sortable","filter","toString","toLocaleLowerCase","indexOf","headersBOMList","methods","acceptBoM","bomList","$emit","cancel","addItem","log","itemAdded","push","removeItemFromproductBOM","i","splice","resetitemBOM","meteor","$subscribe","products","productList","find","fields","production_line","fetch"],"mappings":"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","sourcesContent":["<template>\n  <v-row justify=\"center\">\n    <v-dialog\n      v-model=\"dialog\"\n      id=\"modalRemove\"\n      persistent \n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n      </template>\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">Configuracion de la lista de articulos del producto</span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n          <v-divider></v-divider>\n            <v-row>\n              <v-col\n                cols=\"6\"\n                sm=\"3\"\n              >\n              <span class=\"line\">Disponga la cantidad</span>\n              <v-text-field\n                    v-model=\"validateQuantity\" id=\"inputQuantity\" name=\"quantityField\" label=\"Cantidad\"\n                    :rules=\"[rules.required, rules.number]\"\n                    suffix=\"articulos\"\n              ></v-text-field>\n              </v-col>\n              <v-col\n                cols=\"24\"\n                sm=\"12\"\n              >\n                <span class=\"line\">Elija el articulo</span>\n                <v-data-table :headers=\"headers\" :items=\"products\" \n                      sort-by=\"name\" :single-select=\"true\"  show-select\n                      v-model=\"validateSelectItem\"\n                      class=\"elevation-1\">\n                      <template v-slot:item.isAvailable=\"{item}\">\n                          <div class=\"d-flex align-center pt-5 pb-5\">\n                            <v-icon :color=\"item.isAvailable?'green' : 'red'\">\n                              mdi-checkbox-blank-circle\n                            </v-icon>\n                          </div>\n                        </template>\n                      \n                        <template v-slot:body.append=\"{isMobile}\">\n                          <tr v-if=\"!isMobile\">\n                            <td>\n                            </td>\n                            <td>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.name\" type=\"text\"\n                                            label=\"Nombre\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.name_full\" type=\"text\"\n                                            label=\"Nombre completo\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.unit.name\" type=\"text\"\n                                            label=\"Unidad\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.stock\" type=\"text\"\n                                            label=\"Existencia\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.sku\" type=\"text\"\n                                            label=\"SKU\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.location\" type=\"text\"\n                                            label=\"Ubicacion\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.warehouse.name\" type=\"text\"\n                                            label=\"Almacen\"></v-text-field>\n                            </td>\n                            <td>\n                              <v-text-field v-model=\"headersFilter.provider.name\" type=\"text\"\n                                            label=\"Proveedor\"></v-text-field>\n                            </td>\n                          </tr>\n                        </template>\n                </v-data-table>\n              </v-col>\n              <v-col\n              cols=\"12\"\n              sm=\"6\"\n              >\n              <v-divider></v-divider>\n              <v-btn\n                    depressed\n                    color=\"primary\"\n                    @click=\"addItem()\"\n                  v-if=\"toSeebtn\"\n                  >\n                    Agregar articulo\n                  </v-btn>\n              </v-col>\n            </v-row>\n            <v-row>\n            <v-divider></v-divider>\n              <v-col\n                cols=\"24\"\n                sm=\"12\"\n              >\n              <span class=\"headline\">Lista de articulos del producto</span>\n                <v-data-table :headers=\"headersBOMList\" :items=\"itemList\" \n                      sort-by=\"name\" \n                      class=\"elevation-1\">\n\n                      <template v-slot:item.action=\"{item}\">\n                            <v-tooltip bottom>\n                              <template v-slot:activator=\"{on}\">\n                                <v-icon v-can:delete.hide=\"'itemList'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"removeItemFromproductBOM(item)\">\n                                  delete\n                                </v-icon>\n                              </template>\n                              <span>Eliminar</span>\n                            </v-tooltip>\n                      </template>\n                        \n                </v-data-table>\n              </v-col>\n              \n            </v-row>\n          \n          </v-container>\n          <small>*indica que es requerido</small>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"blue darken-1\"\n            text\n            @click=\"cancel\"\n          >\n            Cerrar\n          </v-btn>\n          <v-btn\n            color=\"blue darken-1\"\n            text\n            @click=\"acceptBoM\"\n          >\n            Aceptar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nimport {Product} from \"../../../api/Products/Product\";\nexport default {\n  name: \"ModalBOM\",\n  props: ['modalData'],\n  data() {\n    return {\n      dialog: false,\n      toSeebtn:false,\n      itemSelected: [],\n      itemBOM:{\n          quantity:'',\n          _id:'',\n          name:''\n      },\n      itemList:[    \n      ],\n      selectedItem: 1,\n      rules: {\n          required: value => !!value || 'Requerido.',\n          counter: value => value.length <= 20 || 'Max 20 caracteres',\n          number: value => {\n            const pattern= /^[+-]?\\d+([,.]\\d+)?$/\n            return pattern.test(value) || 'Numero con formato equivocado, debe ser un real Ejemplo: -123.35 o 7,4 o 8'\n          }\n      },\n      headersFilter: {\n                  isAvailable: '',\n                  name: '',\n                  name_full: '',\n                  unit: {\n                    _id:'',\n                    name: ''\n                  },\n                  stock: '',\n                  sku: '',\n                  location: '',\n                  warehouse: {\n                    _id:'',\n                    name: ''\n                  },\n                  provider:{\n                    _id:'',\n                    name: ''\n                  }\n          },\n          headersBOMFilter:{\n              name: '',\n              quantity: ''\n          }\n    }\n  },\n   show(){\n     // Aqui inicializamos la lista el bom qu el Producto tiene \n     console.info('modalData' , this.modalData);\n     this.itemList=this.modalData.bom;\n   },\n  computed: {\n          validateQuantity:{  \n              set (validateQuantity) {\n                //console.info('cambio text fiel de cantidad  ',validateQuantity);\n                this.itemBOM.quantity=validateQuantity;\n                if(this.itemBOM.quantity !== ''){\n                  //console.log('this.itemBOM._id ',this.itemBOM._id);\n                    if(this.itemBOM._id !==''){\n                      this.toSeebtn=true;\n                    }else{\n                      this.toSeebtn=false;\n                    }\n                }else{\n                  this.toSeebtn=false;\n                }\n                \n                \n              }    \n          },\n          validateSelectItem:{\n\n            set(validateSelectItem){\n              //console.info('Lista de articulos ha cambiado  ',validateSelectItem);\n              // si hay un seleccionado\n              if(validateSelectItem.length > 0){\n                this.itemBOM._id= validateSelectItem[0]._id;\n                this.itemBOM.name= validateSelectItem[0].name;\n                if(this.itemBOM.quantity.length > 0){\n                  this.toSeebtn=true;\n                }else{\n                  this.toSeebtn=false;\n                }\n              }else{\n                this.itemBOM._id='';\n                this.toSeebtn=false;\n              }\n            },\n            get(){\n              return ;\n            }\n\n          },\n          headers() {\n            return [\n              {value: 'isAvailable', text: 'Disponible', sortable: true},\n              {\n                value: 'name', text: 'Nombre', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.name.toLocaleLowerCase()) !== -1;\n                }\n              },\n              \n              {\n                value: 'name_full', text: 'Nombre completo', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.name_full.toLocaleLowerCase()) !== -1;\n                }\n              },\n              {\n                value: 'unit.name', text: 'Unidad', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.unit.name.toLocaleLowerCase()) !== -1;\n                }\n              },\n              {\n                value: 'stock', text: 'Existencias', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.stock.toLocaleLowerCase()) !== -1;\n                }\n              },\n              \n              {\n                value: 'sku', text: 'SKU', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.sku.toLocaleLowerCase()) !== -1;\n                }\n              },\n              \n              {\n                value: 'location', text: 'Ubicacion', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.location.toLocaleLowerCase()) !== -1;\n                }\n              },\n              {\n                value: 'warehouse.name', text: 'Almacen', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.warehouse.name.toLocaleLowerCase()) !== -1;\n                }\n              },\n              {\n                value: 'provider.name', text: 'Proveedor', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersFilter.provider.name.toLocaleLowerCase()) !== -1;\n                }\n              }\n            ]\n          },\n          headersBOMList() {\n            return [\n              {\n                value: 'quantity', text: 'Cantidad', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersBOMFilter.quantity.toLocaleLowerCase()) !== -1;\n                }\n              },\n              {\n                value: 'name', text: 'Nombre', sortable: true, filter: value => {\n                  return value != null && typeof value === 'string' &&\n                      value.toString().toLocaleLowerCase()\n                          .indexOf(this.headersBOMFilter.name.toLocaleLowerCase()) !== -1;\n                }\n              }\n              ,\n              {value: 'action', text: 'Opciones', sortable: false}\n            ]\n          }\n  },\n  methods: {\n    acceptBoM() {\n        // aqui hay que cargar la lista a bomList para regresarla\n      this.modalData.bomList=this.itemList;\n      this.$emit('bomList', this.modalData.bomList);\n      this.dialog = false;\n    },\n    cancel() {\n      \n      this.itemList=[];\n      this.dialog = false;\n    },addItem(){\n      //Agregar al componente List bindeado a this.modalData.bomList=itemBOM\n      console.log('this.itemBOM ',this.itemBOM);\n      const itemAdded= this.itemBOM;\n      console.log('itemAdded',itemAdded);\n      this.itemList.push(itemAdded);\n      console.log('this.itemList' ,this.itemList);\n    },\n    removeItemFromproductBOM(i){\n      this.itemList.splice(i);\n    },\n    resetitemBOM(){\n      this.itemBOM.quantity=0;\n      this.itemBOM.name='';\n      this.itemBOM._id='';\n    }\n  },\n  meteor:{\n            $subscribe: {\n              'product.list':[]\n            },\n            products(){\n              const productList = Product.find({},{fields:{isAvailable:1,name:1,name_full:1,stock:1,unit:1,sku:1,location:1,provider:1,warehouse:1,production_line:1}}).fetch();\n              console.info('productList',productList)\n              return productList;\n            }\n  } \n}\n</script>\n\n<style scoped>\n\n</style>"],"file":"imports/ui/views/Products/ModalBoM.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"ModalBoM.vue"}}],"template":"\n<v-row justify=\"center\">\n  <v-dialog\n    v-model=\"dialog\"\n    id=\"modalRemove\"\n    persistent \n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n    </template>\n    <v-card>\n      <v-card-title>\n        <span class=\"headline\">Configuracion de la lista de articulos del producto</span>\n      </v-card-title>\n      <v-card-text>\n        <v-container>\n        <v-divider></v-divider>\n          <v-row>\n            <v-col\n              cols=\"6\"\n              sm=\"3\"\n            >\n            <span class=\"line\">Disponga la cantidad</span>\n            <v-text-field\n                  v-model=\"validateQuantity\" id=\"inputQuantity\" name=\"quantityField\" label=\"Cantidad\"\n                  :rules=\"[rules.required, rules.number]\"\n                  suffix=\"articulos\"\n            ></v-text-field>\n            </v-col>\n            <v-col\n              cols=\"24\"\n              sm=\"12\"\n            >\n              <span class=\"line\">Elija el articulo</span>\n              <v-data-table :headers=\"headers\" :items=\"products\" \n                    sort-by=\"name\" :single-select=\"true\"  show-select\n                    v-model=\"validateSelectItem\"\n                    class=\"elevation-1\">\n                    <template v-slot:item.isAvailable=\"{item}\">\n                        <div class=\"d-flex align-center pt-5 pb-5\">\n                          <v-icon :color=\"item.isAvailable?'green' : 'red'\">\n                            mdi-checkbox-blank-circle\n                          </v-icon>\n                        </div>\n                      </template>\n                    \n                      <template v-slot:body.append=\"{isMobile}\">\n                        <tr v-if=\"!isMobile\">\n                          <td>\n                          </td>\n                          <td>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.name\" type=\"text\"\n                                          label=\"Nombre\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.name_full\" type=\"text\"\n                                          label=\"Nombre completo\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.unit.name\" type=\"text\"\n                                          label=\"Unidad\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.stock\" type=\"text\"\n                                          label=\"Existencia\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.sku\" type=\"text\"\n                                          label=\"SKU\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.location\" type=\"text\"\n                                          label=\"Ubicacion\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.warehouse.name\" type=\"text\"\n                                          label=\"Almacen\"></v-text-field>\n                          </td>\n                          <td>\n                            <v-text-field v-model=\"headersFilter.provider.name\" type=\"text\"\n                                          label=\"Proveedor\"></v-text-field>\n                          </td>\n                        </tr>\n                      </template>\n              </v-data-table>\n            </v-col>\n            <v-col\n            cols=\"12\"\n            sm=\"6\"\n            >\n            <v-divider></v-divider>\n            <v-btn\n                  depressed\n                  color=\"primary\"\n                  @click=\"addItem()\"\n                v-if=\"toSeebtn\"\n                >\n                  Agregar articulo\n                </v-btn>\n            </v-col>\n          </v-row>\n          <v-row>\n          <v-divider></v-divider>\n            <v-col\n              cols=\"24\"\n              sm=\"12\"\n            >\n            <span class=\"headline\">Lista de articulos del producto</span>\n              <v-data-table :headers=\"headersBOMList\" :items=\"itemList\" \n                    sort-by=\"name\" \n                    class=\"elevation-1\">\n\n                    <template v-slot:item.action=\"{item}\">\n                          <v-tooltip bottom>\n                            <template v-slot:activator=\"{on}\">\n                              <v-icon v-can:delete.hide=\"'itemList'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"removeItemFromproductBOM(item)\">\n                                delete\n                              </v-icon>\n                            </template>\n                            <span>Eliminar</span>\n                          </v-tooltip>\n                    </template>\n                      \n              </v-data-table>\n            </v-col>\n            \n          </v-row>\n        \n        </v-container>\n        <small>*indica que es requerido</small>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"blue darken-1\"\n          text\n          @click=\"cancel\"\n        >\n          Cerrar\n        </v-btn>\n        <v-btn\n          color=\"blue darken-1\"\n          text\n          @click=\"acceptBoM\"\n        >\n          Aceptar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</v-row>\n","hash":"data-v-8a029298"}