{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/startup/server/Permissions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/startup/server/Permissions.js","filename":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/startup/server/Permissions.js","cloneInputAst":true,"passPerPreset":false,"envName":"development","cwd":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros","root":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.12.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/startup/server/Permissions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/startup/server/Permissions.js"}},"code":"module.export({\n  permissionsArray: () => permissionsArray\n});\nlet Roles;\nmodule.link(\"meteor/alanning:roles\", {\n  Roles(v) {\n    Roles = v;\n  }\n\n}, 0);\nconst Permissions = {\n  USERS: {\n    LIST: {\n      VALUE: 'users-view',\n      TEXT: 'Listar usuarios'\n    },\n    CREATE: {\n      VALUE: 'users-create',\n      TEXT: 'Crear Usuario'\n    },\n    UPDATE: {\n      VALUE: 'users-edit',\n      TEXT: 'Editar Usuario'\n    },\n    DELETE: {\n      VALUE: 'users-delete',\n      TEXT: 'Borrar Usuario'\n    }\n  },\n  PROFILES: {\n    LIST: {\n      VALUE: 'profiles-view',\n      TEXT: 'Listar perfil'\n    },\n    CREATE: {\n      VALUE: 'profiles-create',\n      TEXT: 'Crear perfil'\n    },\n    UPDATE: {\n      VALUE: 'profiles-edit',\n      TEXT: 'Editar perfil'\n    },\n    DELETE: {\n      VALUE: 'profiles-delete',\n      TEXT: 'Borrar perfil'\n    }\n  },\n  PERMISSIONS: {\n    LIST: {\n      VALUE: 'permissions-view',\n      TEXT: 'Listar permisos'\n    }\n  },\n  ADMINS: {\n    LIST_ADMINS: {\n      VALUE: 'admins-view',\n      TEXT: 'Listar administrador'\n    },\n    CREATE_ADMIN: {\n      VALUE: 'admins-create',\n      TEXT: 'Crear administrador'\n    },\n    UPDATE_ADMIN: {\n      VALUE: 'admins-edit',\n      TEXT: 'Editar administrador'\n    },\n    DELETE_ADMIN: {\n      VALUE: 'admins-delete',\n      TEXT: 'Borrar administrador'\n    }\n  },\n  SUPERADMINS: {\n    LIST_SUPER_ADMINS: {\n      VALUE: 'superadmins-view',\n      TEXT: 'Listar super administrador'\n    },\n    CREATE_SUPER_ADMIN: {\n      VALUE: 'superadmins-create',\n      TEXT: 'Crear super administrador'\n    },\n    UPDATE_SUPER_ADMIN: {\n      VALUE: 'superadmins-edit',\n      TEXT: 'Editar super administrador'\n    },\n    DELETE_SUPER_ADMIN: {\n      VALUE: 'superadmins-delete',\n      TEXT: 'Borrar super administrador'\n    }\n  },\n  CHAT: {\n    CREATE: {\n      VALUE: 'message-create',\n      TEXT: 'Enviar mensaje de chat'\n    },\n    LIST: {\n      VALUE: 'message-view',\n      TEXT: 'Ver mensajes de chat'\n    }\n  },\n  COMPANIES: {\n    LIST: {\n      VALUE: 'companies-view',\n      TEXT: 'Listar compa単ias'\n    },\n    CREATE: {\n      VALUE: 'companies-create',\n      TEXT: 'Crear compa単ias'\n    },\n    UPDATE: {\n      VALUE: 'companies-edit',\n      TEXT: 'Editar compa単ias'\n    },\n    DELETE: {\n      VALUE: 'companies-delete',\n      TEXT: 'Borrar compa単ias'\n    }\n  },\n  PRODUCTIONLINES: {\n    LIST: {\n      VALUE: 'productionlines-view',\n      TEXT: 'Listar linea de produccion'\n    },\n    CREATE: {\n      VALUE: 'productionlines-create',\n      TEXT: 'Crear linea de produccion'\n    },\n    UPDATE: {\n      VALUE: 'productionlines-edit',\n      TEXT: 'Editar linea de produccion'\n    },\n    DELETE: {\n      VALUE: 'productionlines-delete',\n      TEXT: 'Borrar linea de produccion'\n    }\n  },\n  PRODUCTIONORDERS: {\n    LIST: {\n      VALUE: 'productionorders-view',\n      TEXT: 'Listar orden de produccion'\n    },\n    CREATE: {\n      VALUE: 'productionorders-create',\n      TEXT: 'Crear ordenes de produccion'\n    },\n    UPDATE: {\n      VALUE: 'productionorders-edit',\n      TEXT: 'Editar orden de produccion'\n    },\n    DELETE: {\n      VALUE: 'productionorders-delete',\n      TEXT: 'Borrar orden de produccion'\n    }\n  },\n  PRODUCTS: {\n    LIST: {\n      VALUE: 'products-view',\n      TEXT: 'Listar productos'\n    },\n    CREATE: {\n      VALUE: 'products-create',\n      TEXT: 'Crear productos'\n    },\n    UPDATE: {\n      VALUE: 'products-edit',\n      TEXT: 'Editar producto'\n    },\n    DELETE: {\n      VALUE: 'products-delete',\n      TEXT: 'Borrar producto'\n    }\n  },\n  PROVIDERSTATIONS: {\n    LIST: {\n      VALUE: 'providerstations-view',\n      TEXT: 'Listar estaciones de suministro'\n    },\n    CREATE: {\n      VALUE: 'providerstations-create',\n      TEXT: 'Crear estacion de suministro'\n    },\n    UPDATE: {\n      VALUE: 'providerstations-edit',\n      TEXT: 'Editar estacion de suministro'\n    },\n    DELETE: {\n      VALUE: 'providerstations-delete',\n      TEXT: 'Borrar estacion de suministro'\n    }\n  },\n  WAREHOUSES: {\n    LIST: {\n      VALUE: 'warehouses-view',\n      TEXT: 'Listar almacenes'\n    },\n    CREATE: {\n      VALUE: 'warehouses-create',\n      TEXT: 'Crear almacen'\n    },\n    UPDATE: {\n      VALUE: 'warehouses-edit',\n      TEXT: 'Editar almacen'\n    },\n    DELETE: {\n      VALUE: 'warehouses-delete',\n      TEXT: 'Borrar almacen'\n    }\n  },\n  WORKSTATIONS: {\n    LIST: {\n      VALUE: 'workstations-view',\n      TEXT: 'Listar estaciones de trabajo'\n    },\n    CREATE: {\n      VALUE: 'workstations-create',\n      TEXT: 'Crear estacion de trabajo'\n    },\n    UPDATE: {\n      VALUE: 'workstations-edit',\n      TEXT: 'Editar estacion de trabajo'\n    },\n    DELETE: {\n      VALUE: 'workstations-delete',\n      TEXT: 'Borrar estacion de trabajo'\n    }\n  },\n  PROVIDERS: {\n    LIST: {\n      VALUE: 'providers-view',\n      TEXT: 'Listar proveedores'\n    },\n    CREATE: {\n      VALUE: 'providers-create',\n      TEXT: 'Crear proveedore'\n    },\n    UPDATE: {\n      VALUE: 'providers-edit',\n      TEXT: 'Editar proveedore'\n    },\n    DELETE: {\n      VALUE: 'providers-delete',\n      TEXT: 'Borrar proveedore'\n    }\n  }\n};\nconst permissionsArray = Object.keys(Permissions).reduce((accumulator, systemModuleName) => {\n  const systemModuleObject = Permissions[systemModuleName];\n  const modulePermissions = Object.keys(systemModuleObject).map(permission => systemModuleObject[permission]);\n  return accumulator.concat(modulePermissions);\n}, []);\n\n/*\nDevuelve esto:\n\n[\n  { VALUE: 'users-view', TEXT: 'Listar usuarios' },\n  { VALUE: 'users-create', TEXT: 'Crear Usuario' },\n  { VALUE: 'users-edit', TEXT: 'Editar Usuario' },\n  { VALUE: 'users-delete', TEXT: 'Borrar Usuario' },\n  { VALUE: 'users-admin', TEXT: 'Administrar  Usuarios' },\n  { VALUE: 'users-super-admin', TEXT: 'Super usuario' }\n]\n\n */\nif (Meteor.settings.private && Meteor.settings.private.REFRESH_PERMISSIONS) {\n  console.log(' Updating permissions...');\n  const currentRoles = Roles.getAllRoles().fetch();\n\n  for (let permission of permissionsArray) {\n    let exists = currentRoles.find(_role => _role._id == permission.VALUE);\n\n    if (!exists) {\n      Roles.createRole(permission.VALUE);\n    } else {\n      Meteor.roles.update(permission.VALUE, {\n        $set: {\n          publicName: permission.TEXT\n        }\n      });\n    }\n  }\n} else {\n  console.log('Not Updating permissions...');\n}\n\nmodule.exportDefault(Permissions);","map":{"version":3,"sources":["imports/startup/server/Permissions.js"],"names":["module","export","permissionsArray","Roles","link","v","Permissions","USERS","LIST","VALUE","TEXT","CREATE","UPDATE","DELETE","PROFILES","PERMISSIONS","ADMINS","LIST_ADMINS","CREATE_ADMIN","UPDATE_ADMIN","DELETE_ADMIN","SUPERADMINS","LIST_SUPER_ADMINS","CREATE_SUPER_ADMIN","UPDATE_SUPER_ADMIN","DELETE_SUPER_ADMIN","CHAT","COMPANIES","PRODUCTIONLINES","PRODUCTIONORDERS","PRODUCTS","PROVIDERSTATIONS","WAREHOUSES","WORKSTATIONS","PROVIDERS","Object","keys","reduce","accumulator","systemModuleName","systemModuleObject","modulePermissions","map","permission","concat","Meteor","settings","private","REFRESH_PERMISSIONS","console","log","currentRoles","getAllRoles","fetch","exists","find","_role","_id","createRole","roles","update","$set","publicName","exportDefault"],"mappings":"AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,gBAAgB,EAAC,MAAIA;AAAtB,CAAd;AAAuD,IAAIC,KAAJ;AAAUH,MAAM,CAACI,IAAP,CAAY,uBAAZ,EAAoC;AAACD,EAAAA,KAAK,CAACE,CAAD,EAAG;AAACF,IAAAA,KAAK,GAACE,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAGjE,MAAMC,WAAW,GAAC;AACdC,EAAAA,KAAK,EAAC;AACFC,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,YAAP;AAAoBC,MAAAA,IAAI,EAAC;AAAzB,KADH;AAEFC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,cAAP;AAAsBC,MAAAA,IAAI,EAAC;AAA3B,KAFL;AAGFE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,YAAP;AAAoBC,MAAAA,IAAI,EAAC;AAAzB,KAHL;AAIFG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,cAAP;AAAsBC,MAAAA,IAAI,EAAC;AAA3B;AAJL,GADQ;AAOdI,EAAAA,QAAQ,EAAC;AACLN,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B,KADA;AAELC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B,KAFF;AAGLE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B,KAHF;AAILG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B;AAJF,GAPK;AAadK,EAAAA,WAAW,EAAC;AACRP,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B;AADG,GAbE;AAgBdM,EAAAA,MAAM,EAAC;AACHC,IAAAA,WAAW,EAAC;AAACR,MAAAA,KAAK,EAAC,aAAP;AAAqBC,MAAAA,IAAI,EAAC;AAA1B,KADT;AAEHQ,IAAAA,YAAY,EAAC;AAACT,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B,KAFV;AAGHS,IAAAA,YAAY,EAAC;AAACV,MAAAA,KAAK,EAAC,aAAP;AAAqBC,MAAAA,IAAI,EAAC;AAA1B,KAHV;AAIHU,IAAAA,YAAY,EAAC;AAACX,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B;AAJV,GAhBO;AAsBdW,EAAAA,WAAW,EAAC;AACRC,IAAAA,iBAAiB,EAAC;AAACb,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B,KADV;AAERa,IAAAA,kBAAkB,EAAC;AAACd,MAAAA,KAAK,EAAC,oBAAP;AAA4BC,MAAAA,IAAI,EAAC;AAAjC,KAFX;AAGRc,IAAAA,kBAAkB,EAAC;AAACf,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B,KAHX;AAIRe,IAAAA,kBAAkB,EAAC;AAAChB,MAAAA,KAAK,EAAC,oBAAP;AAA4BC,MAAAA,IAAI,EAAC;AAAjC;AAJX,GAtBE;AA6BdgB,EAAAA,IAAI,EAAE;AACFf,IAAAA,MAAM,EAAE;AAAEF,MAAAA,KAAK,EAAE,gBAAT;AAA2BC,MAAAA,IAAI,EAAE;AAAjC,KADN;AAEFF,IAAAA,IAAI,EAAE;AAAEC,MAAAA,KAAK,EAAE,cAAT;AAAyBC,MAAAA,IAAI,EAAE;AAA/B;AAFJ,GA7BQ;AAiCdiB,EAAAA,SAAS,EAAC;AACNnB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,gBAAP;AAAwBC,MAAAA,IAAI,EAAC;AAA7B,KADC;AAENC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B,KAFD;AAGNE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,gBAAP;AAAwBC,MAAAA,IAAI,EAAC;AAA7B,KAHD;AAING,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B;AAJD,GAjCI;AAwCdkB,EAAAA,eAAe,EAAC;AACZpB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,sBAAP;AAA8BC,MAAAA,IAAI,EAAC;AAAnC,KADO;AAEZC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,wBAAP;AAAgCC,MAAAA,IAAI,EAAC;AAArC,KAFK;AAGZE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,sBAAP;AAA8BC,MAAAA,IAAI,EAAC;AAAnC,KAHK;AAIZG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,wBAAP;AAAgCC,MAAAA,IAAI,EAAC;AAArC;AAJK,GAxCF;AA+CdmB,EAAAA,gBAAgB,EAAC;AACbrB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,uBAAP;AAA+BC,MAAAA,IAAI,EAAC;AAApC,KADQ;AAEbC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,yBAAP;AAAiCC,MAAAA,IAAI,EAAC;AAAtC,KAFM;AAGbE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,uBAAP;AAA+BC,MAAAA,IAAI,EAAC;AAApC,KAHM;AAIbG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,yBAAP;AAAiCC,MAAAA,IAAI,EAAC;AAAtC;AAJM,GA/CH;AAsDdoB,EAAAA,QAAQ,EAAC;AACLtB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B,KADA;AAELC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B,KAFF;AAGLE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,eAAP;AAAuBC,MAAAA,IAAI,EAAC;AAA5B,KAHF;AAILG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B;AAJF,GAtDK;AA6DdqB,EAAAA,gBAAgB,EAAC;AACbvB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,uBAAP;AAA+BC,MAAAA,IAAI,EAAC;AAApC,KADQ;AAEbC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,yBAAP;AAAiCC,MAAAA,IAAI,EAAC;AAAtC,KAFM;AAGbE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,uBAAP;AAA+BC,MAAAA,IAAI,EAAC;AAApC,KAHM;AAIbG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,yBAAP;AAAiCC,MAAAA,IAAI,EAAC;AAAtC;AAJM,GA7DH;AAoEdsB,EAAAA,UAAU,EAAC;AACPxB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B,KADE;AAEPC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,mBAAP;AAA2BC,MAAAA,IAAI,EAAC;AAAhC,KAFA;AAGPE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,iBAAP;AAAyBC,MAAAA,IAAI,EAAC;AAA9B,KAHA;AAIPG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,mBAAP;AAA2BC,MAAAA,IAAI,EAAC;AAAhC;AAJA,GApEG;AA2EduB,EAAAA,YAAY,EAAC;AACTzB,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,mBAAP;AAA2BC,MAAAA,IAAI,EAAC;AAAhC,KADI;AAETC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,qBAAP;AAA6BC,MAAAA,IAAI,EAAC;AAAlC,KAFE;AAGTE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,mBAAP;AAA2BC,MAAAA,IAAI,EAAC;AAAhC,KAHE;AAITG,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,qBAAP;AAA6BC,MAAAA,IAAI,EAAC;AAAlC;AAJE,GA3EC;AAkFdwB,EAAAA,SAAS,EAAC;AACN1B,IAAAA,IAAI,EAAC;AAACC,MAAAA,KAAK,EAAC,gBAAP;AAAwBC,MAAAA,IAAI,EAAC;AAA7B,KADC;AAENC,IAAAA,MAAM,EAAC;AAACF,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B,KAFD;AAGNE,IAAAA,MAAM,EAAC;AAACH,MAAAA,KAAK,EAAC,gBAAP;AAAwBC,MAAAA,IAAI,EAAC;AAA7B,KAHD;AAING,IAAAA,MAAM,EAAC;AAACJ,MAAAA,KAAK,EAAC,kBAAP;AAA0BC,MAAAA,IAAI,EAAC;AAA/B;AAJD;AAlFI,CAAlB;AA4FO,MAAMR,gBAAgB,GAAEiC,MAAM,CAACC,IAAP,CAAY9B,WAAZ,EAAyB+B,MAAzB,CAAgC,CAACC,WAAD,EAAcC,gBAAd,KAAiC;AAC5F,QAAMC,kBAAkB,GAAElC,WAAW,CAACiC,gBAAD,CAArC;AACA,QAAME,iBAAiB,GAAEN,MAAM,CAACC,IAAP,CAAYI,kBAAZ,EAAgCE,GAAhC,CAAoCC,UAAU,IAAGH,kBAAkB,CAACG,UAAD,CAAnE,CAAzB;AACA,SAAOL,WAAW,CAACM,MAAZ,CAAmBH,iBAAnB,CAAP;AACH,CAJ8B,EAI7B,EAJ6B,CAAxB;;AAMP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAGI,MAAM,CAACC,QAAP,CAAgBC,OAAhB,IAA2BF,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwBC,mBAAtD,EAA0E;AACtEC,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,QAAMC,YAAY,GAAEhD,KAAK,CAACiD,WAAN,GAAoBC,KAApB,EAApB;;AACA,OAAI,IAAIV,UAAR,IAAsBzC,gBAAtB,EAAuC;AACnC,QAAIoD,MAAM,GAAEH,YAAY,CAACI,IAAb,CAAkBC,KAAK,IAAGA,KAAK,CAACC,GAAN,IAAWd,UAAU,CAAClC,KAAhD,CAAZ;;AACA,QAAG,CAAC6C,MAAJ,EAAW;AACPnD,MAAAA,KAAK,CAACuD,UAAN,CAAiBf,UAAU,CAAClC,KAA5B;AACH,KAFD,MAEK;AACDoC,MAAAA,MAAM,CAACc,KAAP,CAAaC,MAAb,CAAoBjB,UAAU,CAAClC,KAA/B,EAAsC;AAClCoD,QAAAA,IAAI,EAAC;AACDC,UAAAA,UAAU,EAACnB,UAAU,CAACjC;AADrB;AAD6B,OAAtC;AAMH;AAEJ;AACJ,CAjBD,MAiBK;AACDuC,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACH;;AArIDlD,MAAM,CAAC+D,aAAP,CAuIezD,WAvIf","sourcesContent":["import { Roles } from 'meteor/alanning:roles';\n\n\nconst Permissions={\n    USERS:{\n        LIST:{VALUE:'users-view',TEXT:'Listar usuarios'},\n        CREATE:{VALUE:'users-create',TEXT:'Crear Usuario'},\n        UPDATE:{VALUE:'users-edit',TEXT:'Editar Usuario'},\n        DELETE:{VALUE:'users-delete',TEXT:'Borrar Usuario'}\n    },\n    PROFILES:{\n        LIST:{VALUE:'profiles-view',TEXT:'Listar perfil'},\n        CREATE:{VALUE:'profiles-create',TEXT:'Crear perfil'},\n        UPDATE:{VALUE:'profiles-edit',TEXT:'Editar perfil'},\n        DELETE:{VALUE:'profiles-delete',TEXT:'Borrar perfil'}\n    },\n    PERMISSIONS:{\n        LIST:{VALUE:'permissions-view',TEXT:'Listar permisos'}\n    },\n    ADMINS:{\n        LIST_ADMINS:{VALUE:'admins-view',TEXT:'Listar administrador'},\n        CREATE_ADMIN:{VALUE:'admins-create',TEXT:'Crear administrador'},\n        UPDATE_ADMIN:{VALUE:'admins-edit',TEXT:'Editar administrador'},\n        DELETE_ADMIN:{VALUE:'admins-delete',TEXT:'Borrar administrador'}\n    },\n    SUPERADMINS:{\n        LIST_SUPER_ADMINS:{VALUE:'superadmins-view',TEXT:'Listar super administrador'},\n        CREATE_SUPER_ADMIN:{VALUE:'superadmins-create',TEXT:'Crear super administrador'},\n        UPDATE_SUPER_ADMIN:{VALUE:'superadmins-edit',TEXT:'Editar super administrador'},\n        DELETE_SUPER_ADMIN:{VALUE:'superadmins-delete',TEXT:'Borrar super administrador'}\n\n    },\n    CHAT: {\n        CREATE: { VALUE: 'message-create', TEXT: 'Enviar mensaje de chat'},\n        LIST: { VALUE: 'message-view', TEXT: 'Ver mensajes de chat'}\n    },\n    COMPANIES:{\n        LIST:{VALUE:'companies-view',TEXT:'Listar compa単ias'},\n        CREATE:{VALUE:'companies-create',TEXT:'Crear compa単ias'},\n        UPDATE:{VALUE:'companies-edit',TEXT:'Editar compa単ias'},\n        DELETE:{VALUE:'companies-delete',TEXT:'Borrar compa単ias'}\n\n    },\n    PRODUCTIONLINES:{\n        LIST:{VALUE:'productionlines-view',TEXT:'Listar linea de produccion'},\n        CREATE:{VALUE:'productionlines-create',TEXT:'Crear linea de produccion'},\n        UPDATE:{VALUE:'productionlines-edit',TEXT:'Editar linea de produccion'},\n        DELETE:{VALUE:'productionlines-delete',TEXT:'Borrar linea de produccion'}\n\n    },\n    PRODUCTIONORDERS:{\n        LIST:{VALUE:'productionorders-view',TEXT:'Listar orden de produccion'},\n        CREATE:{VALUE:'productionorders-create',TEXT:'Crear ordenes de produccion'},\n        UPDATE:{VALUE:'productionorders-edit',TEXT:'Editar orden de produccion'},\n        DELETE:{VALUE:'productionorders-delete',TEXT:'Borrar orden de produccion'}\n\n    },\n    PRODUCTS:{\n        LIST:{VALUE:'products-view',TEXT:'Listar productos'},\n        CREATE:{VALUE:'products-create',TEXT:'Crear productos'},\n        UPDATE:{VALUE:'products-edit',TEXT:'Editar producto'},\n        DELETE:{VALUE:'products-delete',TEXT:'Borrar producto'}\n\n    },\n    PROVIDERSTATIONS:{\n        LIST:{VALUE:'providerstations-view',TEXT:'Listar estaciones de suministro'},\n        CREATE:{VALUE:'providerstations-create',TEXT:'Crear estacion de suministro'},\n        UPDATE:{VALUE:'providerstations-edit',TEXT:'Editar estacion de suministro'},\n        DELETE:{VALUE:'providerstations-delete',TEXT:'Borrar estacion de suministro'}\n\n    },\n    WAREHOUSES:{\n        LIST:{VALUE:'warehouses-view',TEXT:'Listar almacenes'},\n        CREATE:{VALUE:'warehouses-create',TEXT:'Crear almacen'},\n        UPDATE:{VALUE:'warehouses-edit',TEXT:'Editar almacen'},\n        DELETE:{VALUE:'warehouses-delete',TEXT:'Borrar almacen'}\n\n    },\n    WORKSTATIONS:{\n        LIST:{VALUE:'workstations-view',TEXT:'Listar estaciones de trabajo'},\n        CREATE:{VALUE:'workstations-create',TEXT:'Crear estacion de trabajo'},\n        UPDATE:{VALUE:'workstations-edit',TEXT:'Editar estacion de trabajo'},\n        DELETE:{VALUE:'workstations-delete',TEXT:'Borrar estacion de trabajo'}\n\n    },\n    PROVIDERS:{\n        LIST:{VALUE:'providers-view',TEXT:'Listar proveedores'},\n        CREATE:{VALUE:'providers-create',TEXT:'Crear proveedore'},\n        UPDATE:{VALUE:'providers-edit',TEXT:'Editar proveedore'},\n        DELETE:{VALUE:'providers-delete',TEXT:'Borrar proveedore'}\n\n    },\n\n};\n\nexport const permissionsArray= Object.keys(Permissions).reduce((accumulator, systemModuleName)=>{\n    const systemModuleObject= Permissions[systemModuleName];\n    const modulePermissions= Object.keys(systemModuleObject).map(permission=> systemModuleObject[permission]);\n    return accumulator.concat(modulePermissions);\n},[]);\n\n/*\nDevuelve esto:\n\n[\n  { VALUE: 'users-view', TEXT: 'Listar usuarios' },\n  { VALUE: 'users-create', TEXT: 'Crear Usuario' },\n  { VALUE: 'users-edit', TEXT: 'Editar Usuario' },\n  { VALUE: 'users-delete', TEXT: 'Borrar Usuario' },\n  { VALUE: 'users-admin', TEXT: 'Administrar  Usuarios' },\n  { VALUE: 'users-super-admin', TEXT: 'Super usuario' }\n]\n\n */\nif(Meteor.settings.private && Meteor.settings.private.REFRESH_PERMISSIONS){\n    console.log(' Updating permissions...');\n    const currentRoles= Roles.getAllRoles().fetch();\n    for(let permission of permissionsArray){\n        let exists= currentRoles.find(_role=> _role._id==permission.VALUE)\n        if(!exists){\n            Roles.createRole(permission.VALUE);\n        }else{\n            Meteor.roles.update(permission.VALUE, {\n                $set:{\n                    publicName:permission.TEXT\n    \n                }\n            });\n        }\n        \n    }\n}else{\n    console.log('Not Updating permissions...');\n}\n\nexport default Permissions;\n\n// https://github.com/Meteor-Community-Packages/meteor-roles"]},"sourceType":"module","hash":"369ebc19d344023e785227449b646ce2e56907b2"}
