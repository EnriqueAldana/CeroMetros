{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar mapMutations;\nmodule.link(\"vuex\", {\n  mapMutations: function (v) {\n    mapMutations = v;\n  }\n}, 0);\nvar uploadImage;\nmodule.link(\"../../mixins/users/uploadImage\", {\n  \"default\": function (v) {\n    uploadImage = v;\n  }\n}, 1);\nmodule.exportDefault({\n  name: \"GeneralData\",\n  mixins: [uploadImage],\n  data: function () {\n    return {\n      user: {\n        _id: null,\n        username: null,\n        emails: [{\n          address: null,\n          verified: false\n        }],\n        profile: {\n          profile: null,\n          name: null,\n          path: null\n        }\n      }\n    };\n  },\n  created: function () {\n    var user = this.$store.state.auth.user;\n    this.user = {\n      _id: user._id,\n      username: user.username,\n      emails: user.emails,\n      profile: user.profile\n    };\n  },\n  methods: _objectSpread({}, mapMutations('auth', ['setUser']), {\n    saveUser: function () {\n      var _this = this;\n\n      this.$loader.activate(\"Actualizando datos...\");\n      Meteor.call('user.updatePersonalData', {\n        user: this.user,\n        photoFileUser: this.photoFileUser\n      }, function (error, response) {\n        _this.$loader.deactivate();\n\n        if (error) {\n          _this.$alert.showAlertSimple('error', error.reason);\n        } else {\n          // Aqui actualizar usuario logeado en el Header\n          // Subirlo a la sesion trayendolo desde la BD con Meteor.user()\n          _this.setUser(Meteor.user()); // invocar el escuchador de cambio de datos en user.updatePersonalData\n\n\n          _this.$root.$emit('setUserLogged');\n\n          _this.$alert.showAlertSimple('success', response.message);\n        }\n      });\n    }\n  })\n});\n})();","map":{"version":3,"sources":["imports/ui/components/ConfigureAccount/GeneralData.vue"],"names":["_objectSpread","module","link","default","v","mapMutations","uploadImage","exportDefault","name","mixins","data","user","_id","username","emails","address","verified","profile","path","created","$store","state","auth","methods","saveUser","$loader","activate","Meteor","call","photoFileUser","error","response","deactivate","$alert","showAlertSimple","reason","setUser","$root","$emit","message"],"mappings":";;;;;;;;;;;;;;;;;;;qBA0CA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,MAAA,EAAA,CAAA,WAAA,CAFA;AAGA,EAAA,IAHA,cAGA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,CAAA;AAAA,UAAA,OAAA,EAAA,IAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA,CAHA;AAIA,QAAA,OAAA,EAAA;AACA,UAAA,OAAA,EAAA,IADA;AAEA,UAAA,IAAA,EAAA,IAFA;AAGA,UAAA,IAAA,EAAA;AAHA;AAJA;AADA,KAAA;AAYA,GAhBA;AAiBA,EAAA,OAjBA,cAiBA;AACA,QAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA,SAAA,IAAA,GAAA;AACA,MAAA,GAAA,EAAA,IAAA,CAAA,GADA;AAEA,MAAA,QAAA,EAAA,IAAA,CAAA,QAFA;AAGA,MAAA,MAAA,EAAA,IAAA,CAAA,MAHA;AAIA,MAAA,OAAA,EAAA,IAAA,CAAA;AAJA,KAAA;AAMA,GAzBA;AA0BA,EAAA,OAAA,oBACA,YAAA,CAAA,MAAA,EAAA,CAAA,SAAA,CAAA,CADA;AAEA,IAAA,QAFA,cAEA;AAAA;;AACA,WAAA,OAAA,CAAA,QAAA,CAAA,uBAAA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,yBAAA,EAAA;AAAA,QAAA,IAAA,EAAA,KAAA,IAAA;AAAA,QAAA,aAAA,EAAA,KAAA;AAAA,OAAA,EAAA,UAAA,KAAA,EAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,UAAA;;AACA,YAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,eAAA,CAAA,OAAA,EAAA,KAAA,CAAA,MAAA;AACA,SAFA,MAEA;AACA;AACA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA,IAAA,EAAA,EAHA,CAIA;;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,eAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,eAAA,CAAA,SAAA,EAAA,QAAA,CAAA,OAAA;AACA;AAEA,OAbA;AAcA;AAlBA;AA1BA","sourcesContent":["<template>\n  <v-form @submit.prevent=\"saveUser\">\n    <v-card>\n      <v-card-title>\n        <div class=\"subtitle-2\">\n          DATOS GENERALES\n        </div>\n      </v-card-title>\n      <v-row>\n        <v-col cols=\"12\"  sm=\"12\" md=\"3\" lg=\"3\" class=\"pl-10\">\n          <img :src=\"user.profile.path || '/img/user.png'\" :alt=\"user.profile.name\" width=\"100px\">\n          <v-file-input v-show=\"false\" ref=\"imageFile\" v-model=\"file\" accept=\"image/png, image/jpeg , image/bpm\">\n          </v-file-input>\n          <v-btn color=\"primary\" class=\"mb-5 mt-5\" width=\"100%\" rounded depressed\n                 @click=\"onClickUploadButtom\">\n            <span v-if=\"user.profile.path\">Cambiar</span>\n            <span v-else>Cargar</span>\n          </v-btn>\n        </v-col>\n        <v-col cols=\"12\"  sm=\"12\" md=\"9\" lg=\"9\">\n          <v-card-text>\n            <v-text-field v-model=\"user.profile.name\" id=\"inputName\" name=\"name\"  label=\"Nombre completo\">\n            </v-text-field>\n            <v-text-field v-model=\"user.username\" id=\"inputUsername\" name=\"username\"  label=\"Usuario\">\n            </v-text-field>\n            <v-text-field v-model=\"user.emails[0].address\" id=\"inputEmail\" name=\"email\"  label=\"Correo electrónico\">\n            </v-text-field>\n            <div class=\"d-flex justify-center\">\n              <v-btn type=\"submit\" color=\"primary\" rounded depressed>\n                Guardar\n              </v-btn>\n            </div>\n          </v-card-text>\n        </v-col>\n      </v-row>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport {mapMutations} from 'vuex';\nimport uploadImage from \"../../mixins/users/uploadImage\";\nexport default {\n  name: \"GeneralData\",\n  mixins:[uploadImage],\n  data() {\n    return {\n      user: {\n        _id: null,\n        username: null,\n        emails: [{address: null, verified: false}],\n        profile: {\n          profile: null,\n          name: null,\n          path: null\n        }\n      }\n    }\n  },\n  created() {\n  const user= this.$store.state.auth.user;\n      this.user= {\n        _id: user._id,\n        username: user.username,\n        emails: user.emails,\n        profile: user.profile\n      }\n  },\n  methods:{\n    ...mapMutations('auth',['setUser']),\n    saveUser(){\n      this.$loader.activate(\"Actualizando datos...\");\n      Meteor.call('user.updatePersonalData',{user: this.user,photoFileUser: this.photoFileUser},(error,response)=>{\n        this.$loader.deactivate();\n        if(error){\n            this.$alert.showAlertSimple('error',error.reason);\n        }else{\n          // Aqui actualizar usuario logeado en el Header\n          // Subirlo a la sesion trayendolo desde la BD con Meteor.user()\n          this.setUser(Meteor.user());\n          // invocar el escuchador de cambio de datos en user.updatePersonalData\n          this.$root.$emit('setUserLogged');\n          this.$alert.showAlertSimple('success',response.message);\n        }\n\n    });\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>e>"],"file":"imports/ui/components/ConfigureAccount/GeneralData.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"GeneralData.vue"}}],"template":"\n<v-form @submit.prevent=\"saveUser\">\n  <v-card>\n    <v-card-title>\n      <div class=\"subtitle-2\">\n        DATOS GENERALES\n      </div>\n    </v-card-title>\n    <v-row>\n      <v-col cols=\"12\"  sm=\"12\" md=\"3\" lg=\"3\" class=\"pl-10\">\n        <img :src=\"user.profile.path || '/img/user.png'\" :alt=\"user.profile.name\" width=\"100px\">\n        <v-file-input v-show=\"false\" ref=\"imageFile\" v-model=\"file\" accept=\"image/png, image/jpeg , image/bpm\">\n        </v-file-input>\n        <v-btn color=\"primary\" class=\"mb-5 mt-5\" width=\"100%\" rounded depressed\n               @click=\"onClickUploadButtom\">\n          <span v-if=\"user.profile.path\">Cambiar</span>\n          <span v-else>Cargar</span>\n        </v-btn>\n      </v-col>\n      <v-col cols=\"12\"  sm=\"12\" md=\"9\" lg=\"9\">\n        <v-card-text>\n          <v-text-field v-model=\"user.profile.name\" id=\"inputName\" name=\"name\"  label=\"Nombre completo\">\n          </v-text-field>\n          <v-text-field v-model=\"user.username\" id=\"inputUsername\" name=\"username\"  label=\"Usuario\">\n          </v-text-field>\n          <v-text-field v-model=\"user.emails[0].address\" id=\"inputEmail\" name=\"email\"  label=\"Correo electrónico\">\n          </v-text-field>\n          <div class=\"d-flex justify-center\">\n            <v-btn type=\"submit\" color=\"primary\" rounded depressed>\n              Guardar\n            </v-btn>\n          </div>\n        </v-card-text>\n      </v-col>\n    </v-row>\n  </v-card>\n</v-form>\n","hash":"data-v-15dc427a"}