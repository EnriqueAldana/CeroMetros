{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar mapMutations;\nmodule.link(\"vuex\", {\n  mapMutations: function (v) {\n    mapMutations = v;\n  }\n}, 0);\nvar ModalRemove;\nmodule.link(\"../../components/Utilities/Modals/ModalRemove\", {\n  \"default\": function (v) {\n    ModalRemove = v;\n  }\n}, 1);\nmodule.exportDefault({\n  name: \"ListUsers\",\n  components: {\n    ModalRemove: ModalRemove\n  },\n  data: function () {\n    return {\n      headersFilter: {\n        name: '',\n        username: '',\n        email: ''\n      },\n      userTemp: {\n        preposition: 'al',\n        typeElement: 'usuario',\n        mainNameElement: '',\n        _id: null,\n        element: {}\n      }\n    };\n  },\n  computed: {\n    headers: function () {\n      var _this = this;\n\n      return [{\n        value: 'profile.path',\n        text: 'Imagen',\n        sortable: false\n      }, {\n        value: 'status.online',\n        text: 'En linea',\n        sortable: true\n      }, {\n        value: 'profile.name',\n        text: 'Nombre',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'username',\n        text: 'Usuario',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.username.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'emails[0].address',\n        text: 'Correo',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.email.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'action',\n        text: 'Opciones',\n        sortable: false\n      }];\n    }\n  },\n  methods: _objectSpread({}, mapMutations('temporal', ['setElement']), {\n    openEditUser: function (user) {\n      //Guardar en Vuex para recuprar en la vistad de user.save\n      this.setElement(user);\n      this.$router.push({\n        name: 'home.users.edit'\n      });\n    },\n    openRemoveModal: function (user) {\n      console.log(\"user: \", user);\n      this.userTemp.element = user;\n      this.userTemp._id = user._id;\n      this.userTemp.mainNameElement = user.profile.name;\n      this.$refs.refModalRemove.dialog = true;\n    },\n    deleteUser: function (idUser) {\n      var _this2 = this;\n\n      this.$loader.activate(\"Eliminando usuario....\");\n      Meteor.call('user.delete', {\n        idUser: idUser\n      }, function (error, response) {\n        _this2.$loader.deactivate();\n\n        if (error) {\n          _this2.$alert.showAlertSimple('error', error.reason);\n        } else {\n          _this2.$alert.showAlertSimple('success', response.message);\n        }\n      });\n    }\n  }),\n  meteor: {\n    $subscribe: {\n      'user.list': []\n    },\n    users: function () {\n      return Meteor.users.find({\n        _id: {\n          $ne: Meteor.userId()\n        }\n      }).fetch();\n    }\n  }\n});\n})();","map":{"version":3,"sources":["imports/ui/views/Users/ListUsers.vue"],"names":["_objectSpread","module","link","default","v","mapMutations","ModalRemove","exportDefault","name","components","data","headersFilter","username","email","userTemp","preposition","typeElement","mainNameElement","_id","element","computed","headers","value","text","sortable","filter","toString","toLocaleLowerCase","indexOf","methods","openEditUser","user","setElement","$router","push","openRemoveModal","console","log","profile","$refs","refModalRemove","dialog","deleteUser","idUser","$loader","activate","Meteor","call","error","response","deactivate","$alert","showAlertSimple","reason","message","meteor","$subscribe","users","find","$ne","userId","fetch"],"mappings":"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","sourcesContent":["<template>\n  <v-container>\n    <v-row justify=\"center\">\n      <v-col xs=\"16\" sm=\"16\" md=\"14\" lg=\"12\" xl=\"9\">\n        <div class=\"d-flex flex-row-reverse mb-5\">\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{on}\">\n              <v-btn v-can:create.hide=\"'users'\" color=\"success\" v-on=\"on\" fab dark :to=\"{name:'home.users.create'}\">\n                <v-icon>add</v-icon>\n              </v-btn>\n            </template>\n            <span>Agregar usuario</span>\n          </v-tooltip>\n        </div>\n        <v-data-table :headers=\"headers\" :items=\"users\" @dblclick:row=\"(event,{item})=>openEditUser(item)\"\n                      sort-by=\"name\" class=\"elevation-1\">\n          <template v-slot:item.profile.path=\"{item}\">\n            <div class=\"d-flex align-center pt-5 pb-5\">\n              <v-avatar>\n                <img :src=\"item.profile.path || '/img/user.png'\" alt=\"Avatar\">\n              </v-avatar>\n            </div>\n          </template>\n          <template v-slot:item.status.online=\"{item}\">\n            <div class=\"d-flex align-center pt-5 pb-5\">\n              <v-icon :color=\"item.status.online?'green' : 'red'\">\n                mdi-checkbox-blank-circle\n              </v-icon>\n            </div>\n          </template>\n          <template v-slot:item.action=\"{item}\">\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{on}\">\n                <v-icon v-can:edit.hide=\"'users'\" color=\"info\" v-on=\"on\" small class=\"mr-2\" @click=\"openEditUser(item)\">\n                  edit\n                </v-icon>\n              </template>\n              <span>Editar</span>\n            </v-tooltip>\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{on}\">\n                <v-icon v-can:delete.hide=\"'users'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"openRemoveModal(item)\">\n                  delete\n                </v-icon>\n              </template>\n              <span>Eliminar</span>\n            </v-tooltip>\n          </template>\n          <template v-slot:body.append=\"{isMobile}\">\n            <tr v-if=\"!isMobile\">\n              <td>\n              </td>\n              <td>\n              </td>\n              <td>\n                <v-text-field v-model=\"headersFilter.name\" type=\"text\"\n                              label=\"Nombre\"></v-text-field>\n              </td>\n              <td>\n                <v-text-field v-model=\"headersFilter.username\" type=\"text\"\n                              label=\"Usuario\"></v-text-field>\n              </td>\n              <td>\n                <v-text-field v-model=\"headersFilter.email\" type=\"email\"\n                              label=\"Correo\"></v-text-field>\n              </td>\n            </tr>\n          </template>\n        </v-data-table>\n        <modal-remove ref=\"refModalRemove\" v-bind:modalData=\"userTemp\"\n                      @id_element=\"deleteUser\"></modal-remove>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport {mapMutations} from 'vuex';\nimport ModalRemove from \"../../components/Utilities/Modals/ModalRemove\";\n\nexport default {\n  name: \"ListUsers\",\n  components: {\n    ModalRemove\n  },\n  data() {\n    return {\n      headersFilter: {\n        name: '',\n        username: '',\n        email: ''\n      },\n      userTemp: {\n        preposition: 'al',\n        typeElement: 'usuario',\n        mainNameElement: '',\n        _id: null,\n        element: {}\n      }\n    }\n  },\n  computed: {\n    headers() {\n      return [\n        {value: 'profile.path', text: 'Imagen', sortable: false},\n        {value: 'status.online', text: 'En linea', sortable: true},\n        {\n          value: 'profile.name', text: 'Nombre', sortable: true, filter: value => {\n            return value != null && typeof value === 'string' &&\n                value.toString().toLocaleLowerCase()\n                    .indexOf(this.headersFilter.name.toLocaleLowerCase()) !== -1;\n          }\n        },\n        {\n          value: 'username', text: 'Usuario', sortable: true, filter: value => {\n            return value != null && typeof value === 'string' &&\n                value.toString().toLocaleLowerCase()\n                    .indexOf(this.headersFilter.username.toLocaleLowerCase()) !== -1;\n          }\n        },\n        {\n          value: 'emails[0].address', text: 'Correo', sortable: true, filter: value => {\n            return value != null && typeof value === 'string' &&\n                value.toString().toLocaleLowerCase()\n                    .indexOf(this.headersFilter.email.toLocaleLowerCase()) !== -1;\n          }\n        },\n        {value: 'action', text: 'Opciones', sortable: false}\n      ]\n    }\n  },\n  methods: {\n    ...mapMutations('temporal',['setElement']),\n    openEditUser(user) {\n      //Guardar en Vuex para recuprar en la vistad de user.save\n      this.setElement(user);\n      this.$router.push({name: 'home.users.edit'});\n    },\n    openRemoveModal(user) {\n      console.log(\"user: \", user);\n      this.userTemp.element = user;\n      this.userTemp._id = user._id;\n      this.userTemp.mainNameElement = user.profile.name;\n      this.$refs.refModalRemove.dialog = true;\n    },\n    deleteUser(idUser) {\n      this.$loader.activate(\"Eliminando usuario....\");\n      Meteor.call('user.delete',{idUser},(error,response)=>{\n        this.$loader.deactivate();\n        if(error){\n          this.$alert.showAlertSimple('error',error.reason);\n        }else{\n          this.$alert.showAlertSimple('success',response.message);\n        }\n      });\n    }\n  },\n  meteor:{\n    $subscribe: {\n      'user.list':[]\n    },\n    users(){\n      return Meteor.users.find({_id:{$ne:Meteor.userId()}}).fetch();\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"file":"imports/ui/views/Users/ListUsers.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"ListUsers.vue"}}],"template":"\n<v-container>\n  <v-row justify=\"center\">\n    <v-col xs=\"16\" sm=\"16\" md=\"14\" lg=\"12\" xl=\"9\">\n      <div class=\"d-flex flex-row-reverse mb-5\">\n        <v-tooltip bottom>\n          <template v-slot:activator=\"{on}\">\n            <v-btn v-can:create.hide=\"'users'\" color=\"success\" v-on=\"on\" fab dark :to=\"{name:'home.users.create'}\">\n              <v-icon>add</v-icon>\n            </v-btn>\n          </template>\n          <span>Agregar usuario</span>\n        </v-tooltip>\n      </div>\n      <v-data-table :headers=\"headers\" :items=\"users\" @dblclick:row=\"(event,{item})=>openEditUser(item)\"\n                    sort-by=\"name\" class=\"elevation-1\">\n        <template v-slot:item.profile.path=\"{item}\">\n          <div class=\"d-flex align-center pt-5 pb-5\">\n            <v-avatar>\n              <img :src=\"item.profile.path || '/img/user.png'\" alt=\"Avatar\">\n            </v-avatar>\n          </div>\n        </template>\n        <template v-slot:item.status.online=\"{item}\">\n          <div class=\"d-flex align-center pt-5 pb-5\">\n            <v-icon :color=\"item.status.online?'green' : 'red'\">\n              mdi-checkbox-blank-circle\n            </v-icon>\n          </div>\n        </template>\n        <template v-slot:item.action=\"{item}\">\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{on}\">\n              <v-icon v-can:edit.hide=\"'users'\" color=\"info\" v-on=\"on\" small class=\"mr-2\" @click=\"openEditUser(item)\">\n                edit\n              </v-icon>\n            </template>\n            <span>Editar</span>\n          </v-tooltip>\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{on}\">\n              <v-icon v-can:delete.hide=\"'users'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"openRemoveModal(item)\">\n                delete\n              </v-icon>\n            </template>\n            <span>Eliminar</span>\n          </v-tooltip>\n        </template>\n        <template v-slot:body.append=\"{isMobile}\">\n          <tr v-if=\"!isMobile\">\n            <td>\n            </td>\n            <td>\n            </td>\n            <td>\n              <v-text-field v-model=\"headersFilter.name\" type=\"text\"\n                            label=\"Nombre\"></v-text-field>\n            </td>\n            <td>\n              <v-text-field v-model=\"headersFilter.username\" type=\"text\"\n                            label=\"Usuario\"></v-text-field>\n            </td>\n            <td>\n              <v-text-field v-model=\"headersFilter.email\" type=\"email\"\n                            label=\"Correo\"></v-text-field>\n            </td>\n          </tr>\n        </template>\n      </v-data-table>\n      <modal-remove ref=\"refModalRemove\" v-bind:modalData=\"userTemp\"\n                    @id_element=\"deleteUser\"></modal-remove>\n    </v-col>\n  </v-row>\n</v-container>\n","hash":"data-v-73bc0839"}