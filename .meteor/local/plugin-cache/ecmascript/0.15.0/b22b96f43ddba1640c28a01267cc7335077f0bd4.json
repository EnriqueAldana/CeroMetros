{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/api/Profiles/ProfileSeeder.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/api/Profiles/ProfileSeeder.js","filename":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/api/Profiles/ProfileSeeder.js","cloneInputAst":true,"passPerPreset":false,"envName":"development","cwd":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros","root":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.12.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/enrique/DiscoDeEnrique/2021/Proyectos/CeroMetros/imports/api/Profiles/ProfileSeeder.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/api/Profiles/ProfileSeeder.js"}},"code":"module.export({\n  StaticProfiles: () => StaticProfiles\n});\nlet Permissions, permissionsArray;\nmodule.link(\"../../startup/server/Permissions\", {\n  default(v) {\n    Permissions = v;\n  },\n\n  permissionsArray(v) {\n    permissionsArray = v;\n  }\n\n}, 0);\nlet Profile;\nmodule.link(\"./Profile\", {\n  Profile(v) {\n    Profile = v;\n  }\n\n}, 1);\nProfile.rawCollection().createIndex({\n  'name': 1\n}, {\n  unique: true\n});\nconst StaticProfiles = {\n  admin: {\n    name: 'admin',\n    description: 'Administrador',\n    permissions: permissionsArray.map(p => p.VALUE)\n  }\n};\n\nif (Meteor.isDevelopment) {\n  if (Meteor.settings.private && Meteor.settings.private.REFRESH_STATIC_PROFILES) {\n    console.log('Updating static profiles');\n    Object.keys(StaticProfiles).forEach(staticprofileName => {\n      Profile.upsert({\n        name: StaticProfiles[staticprofileName].name\n      }, {\n        $set: {\n          description: StaticProfiles[staticprofileName].description,\n          permissions: StaticProfiles[staticprofileName].permissions\n        }\n      });\n      Meteor.users.find({\n        'profile.profile': StaticProfiles[staticprofileName].name\n      }).fetch().forEach(user => {\n        // Meteor.roleAssignments.remove({'user._id':user._id});\n        //RoleAssignment.remove({'user._id':user._id});\n        if (StaticProfiles[staticprofileName].permissions.length > 0) {\n          Roles.setUserRoles(user._id, StaticProfiles[staticprofileName].permissions, StaticProfiles[staticprofileName].name);\n        }\n      });\n    });\n  }\n}","map":{"version":3,"sources":["imports/api/Profiles/ProfileSeeder.js"],"names":["module","export","StaticProfiles","Permissions","permissionsArray","link","default","v","Profile","rawCollection","createIndex","unique","admin","name","description","permissions","map","p","VALUE","Meteor","isDevelopment","settings","private","REFRESH_STATIC_PROFILES","console","log","Object","keys","forEach","staticprofileName","upsert","$set","users","find","fetch","user","length","Roles","setUserRoles","_id"],"mappings":"AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,cAAc,EAAC,MAAIA;AAApB,CAAd;AAAmD,IAAIC,WAAJ,EAAgBC,gBAAhB;AAAiCJ,MAAM,CAACK,IAAP,CAAY,kCAAZ,EAA+C;AAACC,EAAAA,OAAO,CAACC,CAAD,EAAG;AAACJ,IAAAA,WAAW,GAACI,CAAZ;AAAc,GAA1B;;AAA2BH,EAAAA,gBAAgB,CAACG,CAAD,EAAG;AAACH,IAAAA,gBAAgB,GAACG,CAAjB;AAAmB;;AAAlE,CAA/C,EAAmH,CAAnH;AAAsH,IAAIC,OAAJ;AAAYR,MAAM,CAACK,IAAP,CAAY,WAAZ,EAAwB;AAACG,EAAAA,OAAO,CAACD,CAAD,EAAG;AAACC,IAAAA,OAAO,GAACD,CAAR;AAAU;;AAAtB,CAAxB,EAAgD,CAAhD;AAGtNC,OAAO,CAACC,aAAR,GAAwBC,WAAxB,CAAoC;AAAC,UAAO;AAAR,CAApC,EAA+C;AAACC,EAAAA,MAAM,EAAE;AAAT,CAA/C;AAGO,MAAMT,cAAc,GAAC;AACxBU,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAE,OADH;AAEHC,IAAAA,WAAW,EAAE,eAFV;AAGHC,IAAAA,WAAW,EAAEX,gBAAgB,CAACY,GAAjB,CAAqBC,CAAC,IAAEA,CAAC,CAACC,KAA1B;AAHV;AADiB,CAArB;;AAQP,IAAGC,MAAM,CAACC,aAAV,EAAwB;AACpB,MAAGD,MAAM,CAACE,QAAP,CAAgBC,OAAhB,IAA2BH,MAAM,CAACE,QAAP,CAAgBC,OAAhB,CAAwBC,uBAAtD,EAA8E;AAC1EC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYzB,cAAZ,EAA4B0B,OAA5B,CAAoCC,iBAAiB,IAAI;AACrDrB,MAAAA,OAAO,CAACsB,MAAR,CAAe;AAACjB,QAAAA,IAAI,EAACX,cAAc,CAAC2B,iBAAD,CAAd,CAAkChB;AAAxC,OAAf,EAA6D;AAC1DkB,QAAAA,IAAI,EAAC;AACDjB,UAAAA,WAAW,EAACZ,cAAc,CAAC2B,iBAAD,CAAd,CAAkCf,WAD7C;AAEDC,UAAAA,WAAW,EAACb,cAAc,CAAC2B,iBAAD,CAAd,CAAkCd;AAF7C;AADqD,OAA7D;AAMAI,MAAAA,MAAM,CAACa,KAAP,CAAaC,IAAb,CAAkB;AAAC,2BAAkB/B,cAAc,CAAC2B,iBAAD,CAAd,CAAkChB;AAArD,OAAlB,EAA8EqB,KAA9E,GAAsFN,OAAtF,CAA8FO,IAAI,IAAI;AAEnG;AACC;AACD,YAAGjC,cAAc,CAAC2B,iBAAD,CAAd,CAAkCd,WAAlC,CAA8CqB,MAA9C,GAAqD,CAAxD,EAA0D;AACtDC,UAAAA,KAAK,CAACC,YAAN,CAAmBH,IAAI,CAACI,GAAxB,EAA4BrC,cAAc,CAAC2B,iBAAD,CAAd,CAAkCd,WAA9D,EAA0Eb,cAAc,CAAC2B,iBAAD,CAAd,CAAkChB,IAA5G;AACH;AACH,OAPD;AAQH,KAfD;AAgBH;AACJ","sourcesContent":["import Permissions, {permissionsArray} from '../../startup/server/Permissions';\nimport {Profile} from \"./Profile\";\n\nProfile.rawCollection().createIndex({'name':1},{unique: true});\n\n\nexport const StaticProfiles={\n    admin: {\n        name: 'admin',\n        description: 'Administrador',\n        permissions: permissionsArray.map(p=>p.VALUE)\n    }\n};\n\nif(Meteor.isDevelopment){\n    if(Meteor.settings.private && Meteor.settings.private.REFRESH_STATIC_PROFILES){\n        console.log('Updating static profiles');\n        Object.keys(StaticProfiles).forEach(staticprofileName => {\n            Profile.upsert({name:StaticProfiles[staticprofileName].name},{\n               $set:{\n                   description:StaticProfiles[staticprofileName].description,\n                   permissions:StaticProfiles[staticprofileName].permissions\n               }\n            });\n            Meteor.users.find({'profile.profile':StaticProfiles[staticprofileName].name}).fetch().forEach(user => {\n\n               // Meteor.roleAssignments.remove({'user._id':user._id});\n                //RoleAssignment.remove({'user._id':user._id});\n               if(StaticProfiles[staticprofileName].permissions.length>0){\n                   Roles.setUserRoles(user._id,StaticProfiles[staticprofileName].permissions,StaticProfiles[staticprofileName].name);\n               }\n            });\n        });\n    }\n}"]},"sourceType":"module","hash":"b22b96f43ddba1640c28a01267cc7335077f0bd4"}
